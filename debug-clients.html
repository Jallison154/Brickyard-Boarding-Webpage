<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Clients Page</title>
    <link rel="stylesheet" href="admin.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 2rem;
            background: var(--bg-light);
        }
        .debug-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .debug-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }
        .debug-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        .debug-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        .debug-button:hover {
            background: var(--primary-dark);
        }
        .debug-results {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        .clients-list {
            margin-top: 2rem;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>Debug Clients Page</h1>
        
        <div class="debug-section">
            <h2 class="debug-title">Test Functions</h2>
            <button class="debug-button" onclick="testLoadClients()">Test loadClients()</button>
            <button class="debug-button" onclick="testSetupTabs()">Test setupTabs()</button>
            <button class="debug-button" onclick="testAddClient()">Add Test Client</button>
            <button class="debug-button" onclick="testRenderClients()">Render Clients</button>
            <button class="debug-button" onclick="clearDebug()">Clear Debug</button>
            <div id="debugResults" class="debug-results"></div>
        </div>

        <div class="debug-section">
            <h2 class="debug-title">Clients List</h2>
            <div id="clientsList" class="clients-list">
                <p>Clients will appear here...</p>
            </div>
        </div>
    </div>

    <!-- Include the clients.js file -->
    <script src="clients.js"></script>
    
    <script>
        // Debug functions
        function logDebug(message) {
            const element = document.getElementById('debugResults');
            element.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
            element.scrollTop = element.scrollHeight;
        }

        function testLoadClients() {
            try {
                logDebug('Testing loadClients()...');
                if (typeof loadClients === 'function') {
                    loadClients();
                    logDebug('✅ loadClients() called successfully');
                } else {
                    logDebug('❌ loadClients() function not found');
                }
            } catch (error) {
                logDebug('❌ Error calling loadClients(): ' + error.message);
            }
        }

        function testSetupTabs() {
            try {
                logDebug('Testing setupTabs()...');
                if (typeof setupTabs === 'function') {
                    setupTabs();
                    logDebug('✅ setupTabs() called successfully');
                } else {
                    logDebug('❌ setupTabs() function not found');
                }
            } catch (error) {
                logDebug('❌ Error calling setupTabs(): ' + error.message);
            }
        }

        function testAddClient() {
            try {
                logDebug('Adding test client...');
                const testClient = {
                    id: 'test_' + Date.now(),
                    familyName: 'Test Family',
                    contactName: 'John Test',
                    phone: '(406) 555-0123',
                    email: 'john@test.com',
                    dogs: [
                        {
                            id: 'dog_' + Date.now(),
                            animalType: 'Dog',
                            name: 'Buddy',
                            breed: 'Golden Retriever'
                        }
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                clients.push(testClient);
                saveClientsToStorage();
                logDebug('✅ Test client added: ' + testClient.familyName);
            } catch (error) {
                logDebug('❌ Error adding test client: ' + error.message);
            }
        }

        function testRenderClients() {
            try {
                logDebug('Testing renderClients()...');
                filterAndRenderClients();
                logDebug('✅ renderClients() called successfully');
            } catch (error) {
                logDebug('❌ Error calling renderClients(): ' + error.message);
            }
        }

        function clearDebug() {
            document.getElementById('debugResults').textContent = '';
        }

        // Initialize debug page
        document.addEventListener('DOMContentLoaded', () => {
            logDebug('Debug page loaded. Ready to test clients functionality.');
            logDebug('Available functions: loadClients=' + (typeof loadClients) + ', setupTabs=' + (typeof setupTabs) + ', filterAndRenderClients=' + (typeof filterAndRenderClients));
        });
    </script>
</body>
</html>
