<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Admin Login - Brickyard Boarding Kennel">
    <title>Admin Login | Brickyard Boarding Kennel</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="admin.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body class="admin-body">
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <div class="login-logo">
                <img src="resources/images/logo.png" alt="Brickyard Boarding Kennel" class="logo-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                <div class="logo-text" style="display: none;">
                    <h2>Brickyard Boarding</h2>
                    <span class="tagline">Kennel</span>
                </div>
            </div>
            <h2 style="margin-top: 1.5rem;">Admin Login</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
                <p id="loginError" class="error-message"></p>
            </form>
            <a href="index.html" class="back-link">← Back to Website</a>
        </div>
    </div>

    <div class="admin-dashboard" id="adminDashboard" style="display: none;">
        <!-- Admin Navigation -->
        <nav class="admin-nav">
            <div class="admin-nav-content">
                <div class="admin-logo">
                    <img src="resources/images/logo.png" alt="Brickyard Boarding Kennel" class="admin-logo-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                    <div class="logo-text" style="display: none;">
                        <h2>Brickyard Kennel Admin Panel</h2>
                    </div>
                </div>
                <div class="admin-nav-actions">
                    <button class="theme-toggle admin-theme-toggle" id="adminThemeToggle" aria-label="Toggle dark mode">
                        <svg class="theme-icon sun" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                            <path d="M12 1v3M12 20v3M4.22 4.22l2.12 2.12M17.66 17.66l2.12 2.12M1 12h3M20 12h3M4.22 19.78l2.12-2.12M17.66 6.34l2.12-2.12" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <svg class="theme-icon moon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2"/>
                        </svg>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <button class="tab-btn active" data-tab="today">Today</button>
            <button class="tab-btn" data-tab="current">Current Animals</button>
            <button class="tab-btn" data-tab="schedule">Schedule</button>
            <button class="tab-btn" data-tab="clients">Clients</button>
            <button class="tab-btn" data-tab="submissions">Messages</button>
        </div>

        <!-- Contact Submissions Tab -->
        <div class="dashboard-container tab-content" id="submissionsTab">
            <div class="dashboard-header">
                <h1>Contact Submissions</h1>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <span class="stat-number" id="totalSubmissions">0</span>
                        <span class="stat-label">Total Submissions</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" id="pendingSubmissions">0</span>
                        <span class="stat-label">Pending</span>
                    </div>
                </div>
            </div>

            <!-- Emergency Quick Access -->
            <div class="emergency-panel">
                <h3>🔔 Quick Access</h3>
                <div class="emergency-buttons" id="emergencyButtons">
                    <button class="emergency-btn vet" onclick="showQuickAccess('vet')">📋 Vet Info</button>
                    <button class="emergency-btn alert" onclick="checkVaccinationAlerts()">⚠️ Check Vaccines</button>
                    <button class="emergency-btn schedule" onclick="showQuickAccess('schedule')">📅 Schedule Check-In</button>
                    <button class="emergency-btn add" onclick="openQuickAddAnimal()">➕ Quick Add</button>
                    <button class="emergency-btn schedule" id="addAppointmentBtnSubmissions">📅 Add Appointment</button>
                </div>
            </div>

            <div class="submissions-controls">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search by name, email, or message...">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                        <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All</button>
                    <button class="filter-btn" data-filter="boarding">Boarding</button>
                    <button class="filter-btn" data-filter="grooming">Grooming</button>
                    <button class="filter-btn" data-filter="both">Both</button>
                </div>
            </div>

            <div class="submissions-list" id="submissionsList">
                <div class="no-submissions">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 13V6a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v7m16 0v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-5m16 0h-2.586a1 1 0 0 0-.707.293l-2.414 2.414a1 1 0 0 1-.707.293h-3.172a1 1 0 0 1-.707-.293l-2.414-2.414A1 1 0 0 0 6.586 13H4" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <p>No contact submissions yet</p>
                    <span>Submissions from the contact form will appear here</span>
                </div>
            </div>
        </div>

        <!-- Today Tab - Operations View -->
        <div class="dashboard-container tab-content active" id="todayTab">
            <div class="dashboard-header">
                <h1>Today's Operations</h1>
                <div class="today-stats-bar">
                    <div class="quick-stat">
                        <span class="stat-value" id="checkedInCount">0</span>
                        <span class="stat-label">Checked In</span>
                    </div>
                    <div class="quick-stat">
                        <span class="stat-value" id="arrivalsCount">0</span>
                        <span class="stat-label">Arrivals Today</span>
                    </div>
                </div>
            </div>

            <!-- Emergency Quick Access -->
            <div class="emergency-panel">
                <h3>🔔 Quick Access</h3>
                <div class="emergency-buttons" id="emergencyButtons">
                    <button class="emergency-btn vet" onclick="showQuickAccess('vet')">📋 Vet Info</button>
                    <button class="emergency-btn alert" onclick="checkVaccinationAlerts()">⚠️ Check Vaccines</button>
                    <button class="emergency-btn schedule" onclick="showQuickAccess('schedule')">📅 Schedule Check-In</button>
                    <button class="emergency-btn add" onclick="openQuickAddAnimal()">➕ Quick Add</button>
                    <button class="emergency-btn schedule" id="addAppointmentBtnToday">📅 Add Appointment</button>
                </div>
            </div>

            <!-- Today's Main Sections - 3 Column Layout -->
            <div class="today-sections-grid">
                <!-- Arrivals Section -->
                <div class="arrivals-section" id="arrivalsSection">
                    <h2>📥 Arrivals</h2>
                    <div class="arrivals-list" id="arrivalsList"></div>
                </div>

                <!-- Departures Section -->
                <div class="departures-section" id="departuresSection">
                    <h2>🚪 Departures</h2>
                    <div class="departures-list" id="departuresList"></div>
                </div>

                <!-- Current Animals Section -->
                <div class="current-dogs-section" id="currentDogsSection">
                    <h2>🐕 Current Animals</h2>
                    <div class="current-dogs-list" id="currentDogsList"></div>
                </div>
            </div>
        </div>

        <!-- Current Animals Tab - Simple Grid View -->
        <div class="dashboard-container tab-content" id="currentTab">
            <div class="dashboard-header">
                <h1>Current Animals</h1>
                <div class="today-stats-bar">
                    <div class="quick-stat">
                        <span class="stat-value" id="currentAnimalsCount">0</span>
                        <span class="stat-label">Checked In</span>
                    </div>
                </div>
            </div>

            <!-- Emergency Quick Access -->
            <div class="emergency-panel">
                <h3>🔔 Quick Access</h3>
                <div class="emergency-buttons" id="emergencyButtons">
                    <button class="emergency-btn vet" onclick="showQuickAccess('vet')">📋 Vet Info</button>
                    <button class="emergency-btn alert" onclick="checkVaccinationAlerts()">⚠️ Check Vaccines</button>
                    <button class="emergency-btn schedule" onclick="showQuickAccess('schedule')">📅 Schedule Check-In</button>
                    <button class="emergency-btn add" onclick="openQuickAddAnimal()">➕ Quick Add</button>
                    <button class="emergency-btn schedule" id="addAppointmentBtnCurrent">📅 Add Appointment</button>
                </div>
            </div>

            <div class="current-animals-grid" id="currentAnimalsGrid"></div>
        </div>

        <!-- Schedule Tab -->
        <div class="dashboard-container tab-content" id="scheduleTab">
            <div class="dashboard-header">
                <h1>Appointment Schedule</h1>
            </div>

            <!-- Emergency Quick Access -->
            <div class="emergency-panel">
                <h3>🔔 Quick Access</h3>
                <div class="emergency-buttons" id="emergencyButtons">
                    <button class="emergency-btn vet" onclick="showQuickAccess('vet')">📋 Vet Info</button>
                    <button class="emergency-btn alert" onclick="checkVaccinationAlerts()">⚠️ Check Vaccines</button>
                    <button class="emergency-btn schedule" onclick="showQuickAccess('schedule')">📅 Schedule Check-In</button>
                    <button class="emergency-btn add" onclick="openQuickAddAnimal()">➕ Quick Add</button>
                    <button class="emergency-btn schedule" id="addAppointmentBtn">📅 Add Appointment</button>
                </div>
            </div>

            <div class="schedule-layout-wrapper">
                <!-- Left Side - Appointments List -->
                <div class="schedule-appointments-panel">
                    <div class="schedule-controls">
                        <div class="schedule-view-toggle">
                            <button class="view-btn active" data-view="today">Today</button>
                            <button class="view-btn" data-view="list">List View</button>
                            <button class="view-btn" data-view="month">Month View</button>
                        </div>
                        <div class="schedule-filters">
                            <button class="filter-btn active" data-filter="all">All</button>
                            <button class="filter-btn" data-filter="boarding">Boarding</button>
                            <button class="filter-btn" data-filter="grooming">Grooming</button>
                            <button class="filter-btn" data-filter="upcoming">Upcoming</button>
                        </div>
                    </div>

                    <!-- Today's Appointments View -->
                    <div class="appointments-view today-view active" id="todayView">
                        <h2>Today's Appointments</h2>
                        <div class="today-list" id="todayList"></div>
                    </div>

                    <!-- List View -->
                    <div class="appointments-view list-view" id="listView" style="display: none;">
                        <h2>All Appointments</h2>
                        <div class="appointments-list" id="appointmentsList">
                            <div class="no-submissions">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M16 2v4M8 2v4M3 10h18" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                <p>No appointments scheduled</p>
                                <span>Click "Add Appointment" to schedule a new booking</span>
                            </div>
                        </div>
                    </div>

                    <!-- Month View -->
                    <div class="appointments-view month-view" id="monthView" style="display: none;">
                        <h2>Month View</h2>
                        <div class="month-appointments-list" id="monthAppointmentsList"></div>
                    </div>
                </div>

                <!-- Right Side - Calendar -->
                <div class="schedule-calendar-panel">
                    <div class="schedule-calendar-view" id="calendarView">
                        <div class="calendar-header">
                            <button id="prevMonth" class="calendar-nav">←</button>
                            <h2 id="currentMonth">Month Year</h2>
                            <button id="nextMonth" class="calendar-nav">→</button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Client Profiles Tab -->
        <div class="dashboard-container tab-content" id="clientsTab">
            <div class="dashboard-header">
                <div class="header-content">
                    <h1>Client Management</h1>
                    <p class="header-subtitle">Manage client profiles and their animals</p>
                </div>
            </div>

            <!-- Emergency Quick Access -->
            <div class="emergency-panel">
                <h3>🔔 Quick Access</h3>
                <div class="emergency-buttons" id="emergencyButtons">
                    <button class="emergency-btn vet" onclick="showQuickAccess('vet')">📋 Vet Info</button>
                    <button class="emergency-btn alert" onclick="checkVaccinationAlerts()">⚠️ Check Vaccines</button>
                    <button class="emergency-btn schedule" onclick="showQuickAccess('schedule')">📅 Schedule Check-In</button>
                    <button class="emergency-btn add" onclick="openQuickAddAnimal()">➕ Quick Add</button>
                    <button class="emergency-btn schedule" id="addAppointmentBtn">📅 Add Appointment</button>
                </div>
            </div>

            <!-- Controls -->
            <div class="clients-controls">
                <div class="search-section">
                    <div class="search-box">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/>
                            <path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        <input type="text" id="clientSearchInput" placeholder="Search clients, animals, or phone numbers...">
                    </div>
                </div>
                <div class="view-controls">
                    <div class="view-toggle">
                        <button id="cardViewBtn" class="view-btn active" onclick="switchViewMode('card')" title="Card View">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="7" height="7"/>
                                <rect x="14" y="3" width="7" height="7"/>
                                <rect x="14" y="14" width="7" height="7"/>
                                <rect x="3" y="14" width="7" height="7"/>
                            </svg>
                        </button>
                        <button id="columnViewBtn" class="view-btn" onclick="switchViewMode('table')" title="Table View">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 6h18M3 12h18M3 18h18"/>
                            </svg>
                        </button>
                    </div>
                    <button class="btn btn-secondary" id="generateTestDataBtn" title="Generate test clients" style="margin-left: 1rem;">
                        Generate Test Data
                    </button>
                    <button class="btn btn-danger" id="clearTestDataBtn" title="Clear test clients" style="margin-left: 0.5rem;">
                        Clear Test Data
                    </button>
                </div>
            </div>

            <!-- Clients List -->
            <div class="clients-list" id="clientsList">
                <div class="empty-state">
                    <div class="empty-icon">👥</div>
                    <h3>No clients yet</h3>
                    <p>Start by adding your first client profile</p>
                    <button class="btn btn-primary" onclick="openClientModal()">Add First Client</button>
                </div>
            </div>

            <!-- Pagination -->
            <div id="clientsPagination" class="pagination-wrapper"></div>

            <!-- Quick Stats -->
            <div class="quick-stats">
                <div class="stat-card">
                    <div class="stat-icon">👥</div>
                    <div class="stat-content">
                        <span class="stat-number" id="totalClients">0</span>
                        <span class="stat-label">Total Clients</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">🐕</div>
                    <div class="stat-content">
                        <span class="stat-number" id="totalDogs">0</span>
                        <span class="stat-label">Total Animals</span>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">📅</div>
                    <div class="stat-content">
                        <span class="stat-number" id="recentVisits">0</span>
                        <span class="stat-label">Recent Visits</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Footer with Logout -->
        <footer class="admin-footer">
            <div class="admin-footer-content">
                <p>&copy; 1995-2025 Brickyard Boarding Kennel. All rights reserved.</p>
                <button id="logoutBtn" class="btn btn-logout">Logout</button>
            </div>
        </footer>
    </div>


    <!-- Appointment Modal -->
    <div class="modal" id="appointmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="appointmentModalTitle">Add Appointment</h2>
                <button class="modal-close" id="closeAppointmentModal">&times;</button>
            </div>
            <form id="appointmentForm">
                <input type="hidden" id="appointmentId">
                <div class="form-section">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentClient">Client *</label>
                            <select id="appointmentClient" required>
                                <option value="">Select Client...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="appointmentDog">Dog *</label>
                            <select id="appointmentDog" required>
                                <option value="">Select Dog...</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Service Type *</label>
                            <input type="hidden" id="appointmentType" value="boarding">
                            <div id="serviceTypeGroup" style="display:flex; gap:0.5rem;">
                                <button type="button" class="btn service-type-btn" data-type="boarding">Boarding</button>
                                <button type="button" class="btn service-type-btn" data-type="grooming">Grooming</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="appointmentStatus">Status</label>
                            <select id="appointmentStatus">
                                <option value="scheduled">Scheduled</option>
                                <option value="confirmed">Confirmed</option>
                                <option value="in-progress">In Progress</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentStartDate">Start Date *</label>
                            <input type="date" id="appointmentStartDate" required>
                        </div>
                        <div class="form-group">
                            <label for="appointmentStartTime">Start Time</label>
                            <input type="time" id="appointmentStartTime">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="appointmentEndDate">End Date *</label>
                            <input type="date" id="appointmentEndDate" required>
                        </div>
                        <div class="form-group">
                            <label for="appointmentEndTime">End Time</label>
                            <input type="time" id="appointmentEndTime">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="appointmentNotes">Notes</label>
                        <textarea id="appointmentNotes" rows="3"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelAppointmentBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Appointment</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Care Log Modal -->
    <div class="modal" id="careLogModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="careLogTitle">Daily Care Log</h2>
                <button class="modal-close" onclick="closeCareLogModal()">&times;</button>
            </div>
            <form id="careLogForm">
                <input type="hidden" id="careLogAppointmentId">
                <input type="hidden" id="careLogDate">
                <div class="form-section">
                    <h3 id="careLogDogInfo">Dog Info</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="breakfast"> Breakfast Fed
                            </label>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="dinner"> Dinner Fed
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="medications">Medications Given</label>
                        <textarea id="medications" rows="2" placeholder="List medications and doses given"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="walks">Walks/Exercise</label>
                        <textarea id="walks" rows="2" placeholder="Number of walks, duration, activities"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="behavior">Behavior/Observations</label>
                        <textarea id="behavior" rows="3" placeholder="Notes about behavior, mood, eating, etc."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="careNotes">Additional Notes</label>
                        <textarea id="careNotes" rows="2" placeholder="Any other observations or care provided"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeCareLogModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Care Log</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Check-in/Out Modal -->
    <div class="modal" id="checkinModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="checkinTitle">Check In / Check Out</h2>
                <button class="modal-close" onclick="closeCheckinModal()">&times;</button>
            </div>
            <form id="checkinForm">
                <input type="hidden" id="checkinAppointmentId">
                <div class="form-section">
                    <h3 id="checkinDogInfo">Dog Info</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="checkinDate">Check-In Date & Time</label>
                            <input type="datetime-local" id="checkinDate">
                        </div>
                        <div class="form-group">
                            <label for="checkoutDate">Check-Out Date & Time</label>
                            <input type="datetime-local" id="checkoutDate">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="checkinNotes">Notes</label>
                        <textarea id="checkinNotes" rows="3" placeholder="Condition on arrival, items brought, special instructions"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeCheckinModal()">Cancel</button>
                    <button type="button" class="btn btn-primary" onclick="checkIn()" id="checkInBtn">Confirm Check In</button>
                    <button type="button" class="btn btn-primary" onclick="checkOut()" id="checkOutBtn" style="display: none;">Confirm Check Out</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Day Details Modal -->
    <div class="modal" id="dayDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="dayDetailsTitle">Appointments</h2>
                <button class="modal-close" onclick="closeDayDetailsModal()">&times;</button>
            </div>
            <div id="dayDetailsContent" class="day-details-content"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeDayDetailsModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Quick Access Modal -->
    <div class="modal" id="quickAccessModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="quickAccessTitle">Quick Access</h2>
                <button class="modal-close" onclick="closeQuickAccessModal()">&times;</button>
            </div>
            <div id="quickAccessContent" class="quick-access-content"></div>
        </div>
    </div>

    <!-- Quick Add Animal Modal -->
    <div class="modal" id="quickAddAnimalModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>➕ Quick Add Animal</h2>
                <button class="modal-close" onclick="closeQuickAddAnimalModal()">&times;</button>
            </div>
            <form id="quickAddAnimalForm">
                <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">
                    <!-- Step Indicator -->
                    <div class="quick-add-steps">
                        <div class="step active" id="step1-indicator">
                            <span class="step-number">1</span>
                            <span class="step-label">Client Info</span>
                        </div>
                        <div class="step" id="step2-indicator">
                            <span class="step-number">2</span>
                            <span class="step-label">Animal Info</span>
                        </div>
                        <div class="step" id="step3-indicator">
                            <span class="step-number">3</span>
                            <span class="step-label">Review</span>
                        </div>
                    </div>

                    <!-- Step 1: Client Information -->
                    <div class="quick-add-step" id="step1-content">
                        <h3>Client Information</h3>
                        <div class="form-group">
                            <label for="quickClientName">Contact Name *</label>
                            <input type="text" id="quickClientName" required>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="quickClientPhone">Phone *</label>
                                <input type="tel" id="quickClientPhone" required>
                            </div>
                            <div class="form-group">
                                <label for="quickClientEmail">Email</label>
                                <input type="email" id="quickClientEmail">
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="quickEmergencyPhone">Emergency Contact Phone</label>
                            <input type="tel" id="quickEmergencyPhone">
                        </div>
                    </div>

                    <!-- Step 2: Animal Information -->
                    <div class="quick-add-step" id="step2-content" style="display: none;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                            <h3 style="margin: 0;">Animal Information</h3>
                            <span id="animalCountBadge" style="background: var(--primary-color); color: white; padding: 0.25rem 0.75rem; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">0 animals</span>
                        </div>
                        
                        <!-- Animals List -->
                        <div id="quickAnimalsList" class="quick-animals-list" style="margin-bottom: 1.5rem;"></div>
                        
                        <!-- Add Animal Form -->
                        <div class="animal-form-section" style="border-top: 2px solid var(--bg-light); padding-top: 1.5rem;">
                            <h4 style="margin-bottom: 1rem;">Add Animal</h4>
                            <div class="form-group">
                                <label for="quickAnimalName">Animal Name *</label>
                                <input type="text" id="quickAnimalName" required>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quickAnimalType">Animal Type *</label>
                                    <select id="quickAnimalType" required>
                                        <option value="">Select...</option>
                                        <option value="Dog">Dog</option>
                                        <option value="Cat">Cat</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="quickAnimalBreed">Breed</label>
                                    <input type="text" id="quickAnimalBreed" list="breedsList">
                                    <datalist id="breedsList"></datalist>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="quickAnimalAge">Age (years)</label>
                                    <input type="number" id="quickAnimalAge" min="0" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label for="quickAnimalWeight">Weight (lbs)</label>
                                    <input type="number" id="quickAnimalWeight" min="0">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="quickAnimalFood">Food Requirements</label>
                                <textarea id="quickAnimalFood" rows="2"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="quickAnimalNotes">Special Notes</label>
                                <textarea id="quickAnimalNotes" rows="2"></textarea>
                            </div>
                            <button type="button" class="btn btn-primary" onclick="addAnimalToList()" style="width: 100%;">
                                ➕ Add Animal to List
                            </button>
                        </div>
                    </div>

                    <!-- Step 3: Review & Confirm -->
                    <div class="quick-add-step" id="step3-content" style="display: none;">
                        <h3>Review & Confirm</h3>
                        <div id="quickAddReviewContent"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="quickAddPrevBtn" style="display: none;" onclick="quickAddPrevStep()">← Previous</button>
                    <div style="margin-left: auto; display: flex; gap: 1rem;">
                        <button type="button" class="btn btn-secondary" onclick="closeQuickAddAnimalModal()">Cancel</button>
                        <button type="button" class="btn btn-primary" id="quickAddNextBtn" onclick="quickAddNextStep()">Next →</button>
                        <button type="submit" class="btn btn-primary" id="quickAddSubmitBtn" style="display: none;">Save Client</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Mobile Date Picker Popout -->
    <div class="modal" id="appointmentDateModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="appointmentDateTitle">Select Dates</h2>
                <button class="modal-close" onclick="closeAppointmentDateModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="mobileStartDate">Start Date</label>
                    <input type="date" id="mobileStartDate">
                </div>
                <div class="form-group">
                    <label for="mobileEndDate">End Date</label>
                    <input type="date" id="mobileEndDate">
                </div>
            </div>
            <div class="modal-footer" style="display:flex; justify-content:flex-end; gap:0.5rem; padding:1rem 2rem 2rem;">
                <button class="btn btn-secondary" onclick="closeAppointmentDateModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveAppointmentDatesFromPopout()">Save</button>
            </div>
        </div>
    </div>

    <!-- Time Picker Popout -->
    <div class="modal" id="appointmentTimeModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="appointmentTimeTitle">Select Time</h2>
                <button class="modal-close" onclick="closeAppointmentTimeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="mobileTimeInput">Time</label>
                    <input type="time" id="mobileTimeInput" step="900">
                </div>
                <div class="form-group" style="display:flex; flex-wrap:wrap; gap:0.5rem;">
                    <button class="btn" type="button" onclick="setQuickTime('08:00')">08:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('09:00')">09:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('10:00')">10:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('14:00')">14:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('15:00')">15:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('16:00')">16:00</button>
                    <button class="btn" type="button" onclick="setQuickTime('17:00')">17:00</button>
                </div>
            </div>
            <div class="modal-footer" style="display:flex; justify-content:flex-end; gap:0.5rem; padding:1rem 2rem 2rem;">
                <button class="btn btn-secondary" onclick="closeAppointmentTimeModal()">Cancel</button>
                <button class="btn btn-primary" onclick="saveAppointmentTimeFromPopout()">Save</button>
            </div>
        </div>
    </div>

    <!-- Client Details View Modal -->
    <div class="modal" id="clientDetailsModal">
        <div class="modal-content modal-extra-large">
            <div class="modal-header">
                <h2 id="clientDetailsTitle">Client Details</h2>
                <button class="modal-close" onclick="closeClientDetailsModal()">&times;</button>
            </div>
            <div id="clientDetailsContent" class="client-details-content"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="deleteFromDetailsBtn">Delete Client</button>
                <div class="modal-footer-right">
                    <button type="button" class="btn btn-secondary" onclick="closeClientDetailsModal()">Close</button>
                    <button type="button" class="btn btn-primary" id="editFromDetailsBtn">Edit Client</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Current Animal Detail Modal -->
    <div class="modal" id="currentAnimalDetailModal" onclick="if(event.target === this) closeCurrentAnimalDetailModal()">
        <div class="modal-content modal-large" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="currentAnimalDetailTitle">Animal Details</h2>
                <button class="modal-close" onclick="closeCurrentAnimalDetailModal()">&times;</button>
            </div>
            <div id="currentAnimalDetailContent" class="modal-body" style="max-height: 80vh; overflow-y: auto;"></div>
        </div>
    </div>

    <!-- Animal Info Modal -->
    <div class="modal" id="animalInfoModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="animalInfoTitle">Animal Information</h2>
                <button class="modal-close" onclick="closeAnimalInfoModal()">&times;</button>
            </div>
            <div id="animalInfoContent" class="animal-info-content"></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeAnimalInfoModal()">Close</button>
                <button type="button" class="btn btn-primary" id="editAnimalInfoBtn">Edit Info</button>
            </div>
        </div>
    </div>

    <!-- Edit Animal Info Modal -->
    <div class="modal" id="editAnimalInfoModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="editAnimalInfoTitle">Update Animal Information</h2>
                <button class="modal-close" onclick="closeEditAnimalInfoModal()">&times;</button>
            </div>
            <form id="editAnimalInfoForm">
                <input type="hidden" id="editAnimalInfoAppointmentId">
                <input type="hidden" id="editAnimalInfoDogId">
                <input type="hidden" id="editAnimalInfoClientId">
                <div class="form-section">
                    <h3>Animal Type</h3>
                    <div class="form-group">
                        <label for="editAnimalType">Type</label>
                        <select id="editAnimalType">
                            <option value="Dog">Dog</option>
                            <option value="Cat">Cat</option>
                        </select>
                    </div>
                </div>
                <div class="form-section">
                    <h3>Food Requirements</h3>
                    <div class="form-group">
                        <label for="editFoodRequirements">Food Details</label>
                        <textarea id="editFoodRequirements" rows="3" placeholder="Brand, feeding schedule, amount, etc."></textarea>
                    </div>
                </div>
                <div class="form-section">
                    <h3>Medications</h3>
                    <div class="form-group">
                        <label>Select Medications</label>
                        <div id="editMedicationsSelector"></div>
                    </div>
                </div>
                <div class="form-section">
                    <h3>Special Notes</h3>
                    <div class="form-group">
                        <label for="editDogNotes">Notes</label>
                        <textarea id="editDogNotes" rows="3" placeholder="Allergies, behavior notes, special instructions, etc."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="closeEditAnimalInfoModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Profile Modal -->
    <div class="modal" id="clientModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Client</h2>
                <button class="modal-close" id="closeModal">&times;</button>
            </div>
            <form id="clientForm">
                <input type="hidden" id="clientId">
                
                <!-- Client Information -->
                <div class="form-section">
                    <h3>Client Information</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="familyName">Family Name *</label>
                            <input type="text" id="familyName" required placeholder="e.g., Smith Family">
                        </div>
                        <div class="form-group">
                            <label for="contactName">Primary Contact *</label>
                            <input type="text" id="contactName" required placeholder="e.g., John Smith">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Phone Number *</label>
                            <input type="tel" id="phone" required placeholder="(406) 555-0123">
                        </div>
                        <div class="form-group">
                            <label for="email">Email Address</label>
                            <input type="email" id="email" placeholder="john@example.com">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" id="address" placeholder="123 Main St, Billings, MT 59101">
                    </div>
                </div>

                <!-- Emergency Contact -->
                <div class="form-section">
                    <h3>Emergency Contact</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="emergencyContact">Emergency Contact Name</label>
                            <input type="text" id="emergencyContact" placeholder="e.g., Jane Smith">
                        </div>
                        <div class="form-group">
                            <label for="emergencyPhone">Emergency Phone</label>
                            <input type="tel" id="emergencyPhone" placeholder="(406) 555-0124">
                        </div>
                    </div>
                </div>

                <!-- Veterinarian -->
                <div class="form-section">
                    <h3>Veterinarian</h3>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="vetName">Veterinarian Name</label>
                            <input type="text" id="vetName" placeholder="e.g., Dr. Johnson">
                        </div>
                        <div class="form-group">
                            <label for="vetPhone">Vet Phone</label>
                            <input type="tel" id="vetPhone" placeholder="(406) 555-0125">
                        </div>
                    </div>
                </div>

                <!-- Animals -->
                <div class="form-section">
                    <div class="section-header">
                        <h3>Animals</h3>
                        <button type="button" class="btn btn-secondary" id="addDogBtn">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 5v14M5 12h14"/>
                            </svg>
                            Add Animal
                        </button>
                    </div>
                    <div id="dogsContainer" class="animals-container">
                        <p class="no-animals">No animals added yet. Click "Add Animal" to get started.</p>
                    </div>
                </div>

                <!-- Notes -->
                <div class="form-section">
                    <h3>Notes</h3>
                    <div class="form-group">
                        <label for="notes">Additional Notes</label>
                        <textarea id="notes" rows="3" placeholder="Any special instructions, preferences, or important information..."></textarea>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Client</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Client Details Modal -->
    <div class="modal" id="clientDetailsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="clientDetailsTitle">Client Details</h2>
                <button class="modal-close" id="closeClientDetailsModal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="clientDetailsContent"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="editFromDetailsBtn">Edit Client</button>
                <button type="button" class="btn btn-primary" onclick="closeClientDetailsModal()">Close</button>
            </div>
        </div>
    </div>

    <!-- Custom Confirmation Modal -->
    <div class="modal" id="confirmModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="confirmModalTitle">Confirm Action</h2>
                <button class="modal-close" onclick="closeConfirmModal(false)">&times;</button>
            </div>
            <div class="modal-body">
                <p id="confirmModalMessage">Are you sure?</p>
            </div>
            <div class="modal-footer" id="confirmModalFooter">
                <button type="button" class="btn btn-secondary" onclick="closeConfirmModal(false)">Cancel</button>
                <button type="button" class="btn btn-primary" id="confirmModalYesBtn">Yes</button>
            </div>
        </div>
    </div>

    <script src="theme.js"></script>
    <script src="databases.js"></script>
    <script src="confirm-utils.js"></script>
    <script src="modal-utils.js"></script>
    <script src="admin.js"></script>
    <script src="clients.js"></script>
    <script src="scheduling.js"></script>
    <script src="care-management.js"></script>
    <script src="today-operations.js"></script>
    <script src="quick-add-animal.js?v=20251029"></script>
    <script src="generate-test-data.js?v=20251029"></script>
</body>
</html>

