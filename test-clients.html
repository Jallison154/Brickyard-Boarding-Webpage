<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Clients Page</title>
    <link rel="stylesheet" href="admin.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 2rem;
            background: var(--bg-light);
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .test-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
        }
        .test-title {
            color: var(--primary-color);
            margin-bottom: 1rem;
        }
        .test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            margin: 0.5rem;
            font-size: 1rem;
        }
        .test-button:hover {
            background: var(--primary-dark);
        }
        .test-results {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 8px;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Clients Page Test</h1>
        
        <div class="test-section">
            <h2 class="test-title">Test Data Management</h2>
            <button class="test-button" onclick="testLoadClients()">Load Clients</button>
            <button class="test-button" onclick="testAddClient()">Add Test Client</button>
            <button class="test-button" onclick="testSearchClients()">Test Search</button>
            <button class="test-button" onclick="testClearData()">Clear All Data</button>
            <div id="testResults" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">Test UI Components</h2>
            <button class="test-button" onclick="testCardView()">Test Card View</button>
            <button class="test-button" onclick="testTableView()">Test Table View</button>
            <button class="test-button" onclick="testPagination()">Test Pagination</button>
            <div id="uiResults" class="test-results"></div>
        </div>

        <div class="test-section">
            <h2 class="test-title">Test Client Modal</h2>
            <button class="test-button" onclick="testOpenModal()">Open Client Modal</button>
            <button class="test-button" onclick="testAddDogForm()">Test Add Dog Form</button>
            <div id="modalResults" class="test-results"></div>
        </div>
    </div>

    <!-- Include the clients.js file -->
    <script src="clients.js"></script>
    
    <script>
        // Test functions
        function logResult(elementId, message) {
            const element = document.getElementById(elementId);
            element.textContent += new Date().toLocaleTimeString() + ': ' + message + '\n';
        }

        function testLoadClients() {
            try {
                loadClientsFromStorage();
                logResult('testResults', `✅ Loaded ${clients.length} clients from storage`);
                logResult('testResults', `Clients: ${JSON.stringify(clients, null, 2)}`);
            } catch (error) {
                logResult('testResults', `❌ Error loading clients: ${error.message}`);
            }
        }

        function testAddClient() {
            try {
                const testClient = {
                    id: 'test_' + Date.now(),
                    familyName: 'Test Family',
                    contactName: 'John Test',
                    phone: '(406) 555-0123',
                    email: 'john@test.com',
                    address: '123 Test St, Billings, MT',
                    emergencyContact: 'Jane Test',
                    emergencyPhone: '(406) 555-0124',
                    vetName: 'Dr. Test',
                    vetPhone: '(406) 555-0125',
                    notes: 'Test client for testing purposes',
                    dogs: [
                        {
                            id: 'dog_' + Date.now(),
                            animalType: 'Dog',
                            name: 'Buddy',
                            breed: 'Golden Retriever',
                            age: '3 years',
                            weight: '65 lbs',
                            gender: 'Male',
                            notes: 'Friendly dog'
                        }
                    ],
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };
                
                clients.push(testClient);
                saveClientsToStorage();
                logResult('testResults', `✅ Added test client: ${testClient.familyName}`);
            } catch (error) {
                logResult('testResults', `❌ Error adding test client: ${error.message}`);
            }
        }

        function testSearchClients() {
            try {
                searchTerm = 'test';
                filterAndRenderClients();
                logResult('testResults', `✅ Search completed. Found ${filteredClients.length} clients matching 'test'`);
            } catch (error) {
                logResult('testResults', `❌ Error searching clients: ${error.message}`);
            }
        }

        function testClearData() {
            try {
                clients = [];
                saveClientsToStorage();
                logResult('testResults', `✅ Cleared all client data`);
            } catch (error) {
                logResult('testResults', `❌ Error clearing data: ${error.message}`);
            }
        }

        function testCardView() {
            try {
                switchViewMode('card');
                logResult('uiResults', `✅ Switched to card view`);
            } catch (error) {
                logResult('uiResults', `❌ Error switching to card view: ${error.message}`);
            }
        }

        function testTableView() {
            try {
                switchViewMode('table');
                logResult('uiResults', `✅ Switched to table view`);
            } catch (error) {
                logResult('uiResults', `❌ Error switching to table view: ${error.message}`);
            }
        }

        function testPagination() {
            try {
                currentPage = 1;
                clientsPerPage = 5;
                filterAndRenderClients();
                logResult('uiResults', `✅ Pagination test completed. Page ${currentPage} of ${Math.ceil(filteredClients.length / clientsPerPage)}`);
            } catch (error) {
                logResult('uiResults', `❌ Error testing pagination: ${error.message}`);
            }
        }

        function testOpenModal() {
            try {
                openClientModal();
                logResult('modalResults', `✅ Client modal opened`);
            } catch (error) {
                logResult('modalResults', `❌ Error opening modal: ${error.message}`);
            }
        }

        function testAddDogForm() {
            try {
                addDogForm();
                logResult('modalResults', `✅ Dog form added`);
            } catch (error) {
                logResult('modalResults', `❌ Error adding dog form: ${error.message}`);
            }
        }

        // Initialize test
        document.addEventListener('DOMContentLoaded', () => {
            logResult('testResults', 'Test page loaded. Ready to test clients functionality.');
        });
    </script>
</body>
</html>
